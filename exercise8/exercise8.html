<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">

    <title>Animation</title>

    <link rel="stylesheet" href="../styles.css">

    <script src="../drawing.js"></script>
    <script src="../objects.js"></script>
        <!--[if lt IE 9]>
        <script
        src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js">
        </script>
        <![endif]-->

</head>

<body>
  <h1>Animation</h1>
  <canvas id="pacman" width="300" height="300"></canvas>
  <script>
    let context = document.getElementById("pacman").getContext("2d");
    let pacman = new PacMan(150, 150, 20, 120);

    let draw = (ctx, guide) => {
      pacman.draw(ctx)
    }

    let update = (elapsed) => {
      pacman.update(elapsed, 300, 300)
    }

    let previous, elapsed;

    let frame = (timestamp) => {
      context.clearRect(0, 0, context.canvas.width, context.canvas.height);
      if (!previous) previous = timestamp;
      elapsed = timestamp - previous;
      update(elapsed / 1000);
      draw(context, true);
      previous = timestamp;
      window.requestAnimationFrame(frame);
    }
    window.requestAnimationFrame(frame);
  </script>
</body>
</html>

